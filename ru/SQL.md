# SQL

**## SQL**
### Что такое реляционная база данных?
**Реляционная база данных** — это тип базы данных, в которой данные организованы в таблицы (реляции), состоящие из строк и столбцов. Каждая таблица представляет собой сущность, а строки — это записи, которые содержат данные о конкретных экземплярах этой сущности.
Ключевые характеристики:
* **Связи**: Таблицы могут быть связаны друг с другом через ключи (первичные и внешние).
* **SQL**: Для управления данными используется язык SQL (Structured Query Language).
* **Нормализация**: Данные структурированы для уменьшения избыточности и повышения целостности.

Пример: 
База данных для управления библиотекой может содержать таблицы для книг, авторов и читателей, где таблицы связаны через идентификаторы.

### Объясните разницу между JOIN и UNION.
**UNION** — это метод, который позволяет объединить несколько наборов данных вертикально, то есть прикрепить строки одного запроса к другому. Важно учитывать, что UNION требует соответствия столбцам по числу и типу данных во всех объединяемых запросах.
**Примеры использования UNION**
* **Объединение данных**: Сведение информации о продажах за разные годы в одном наборе. Ни один год не должен быть упущен!
* **Уникальный список**: Создание списка всех уникальных клиентов путем объединения данных из разных источников. Каждый клиент имеет значение!
* **Отчетность**: Создание сводных отчетов посредством объединения группировок. Именно в разнообразии кроется ценность.

**Тонкости использования UNION**
* **Совпадение столбцов**: UNION требует одинакового набора столбцов во всех входящих запросах.
* **Дублирование**: По умолчанию UNION исключает дубликаты, если только не использован UNION ALL.
* **Сортировка**: Для упорядочивания данных после объединения может потребоваться дополнительный сортирующий запрос с ORDER BY.

### Каковы основные типы данных в SQL?
### Что такое индексы и как они работают?
Это структуры данных, которые ускоряют поиск строк в таблицах. Индексы работают как указатели, позволяя СУБД быстро находить записи. Пример: 
`CREATE INDEX idx_name ON users(name);`

### Каковы основные операции CRUD?
* **C**reate: добавление данных.
* **R**ead: чтение данных.
* **U**pdate: обновление данных.
* **D**elete: удаление данных. 

Пример: 
`INSERT INTO users (name) VALUES ('John');`

### Что такое нормализация и денормализация?
Нормализация — это процесс организации данных для уменьшения избыточности. Денормализация — добавление избыточности для повышения производительности. Пример нормализации: разделение таблицы пользователей и адресов.

Первая нормальная форма, или 1NF, удаляет повторяющиеся группы из таблицы, чтобы гарантировать атомарность.
Вторая нормальная форма, или 2NF, уменьшает избыточность, устраняя частичные зависимости.
В реляционной базе данных третья нормальная форма, или 3NF, уменьшает дублирование данных, удаляя транзитивные зависимости.

### Объясните, что такое транзакции и их свойства (ACID).
Транзакции — это группы операций, которые выполняются как единое целое. ACID:
* **A**tomocity: все или ничего.
* **C**onsistency: данные остаются в согласованном состоянии.
* **I**solation: параллельные транзакции не влияют друг на друга.
* **D**urability: изменения сохраняются.

### Как работают подзапросы?
Это запрос внутри другого запроса, который возвращает данные для основного запроса. 
Пример: 
`SELECT * FROM users WHERE id IN (SELECT user_id FROM orders);`

### Что такое представления (views) и как они используются?
Это виртуальные таблицы, созданные на основе SQL-запросов. Используются для упрощения сложных запросов. Пример: 
`CREATE VIEW active_users AS SELECT * FROM users WHERE status = 'active';`
### 

### Как реализовать ограничение уникальности в таблице?
Обеспечивает уникальность значений в столбце. Пример: 
`ALTER TABLE users ADD CONSTRAINT unique_email UNIQUE (email);`

### Что такое триггеры и как они работают?
 Это автоматические действия, выполняемые при определенных событиях (INSERT, UPDATE, DELETE). 
Пример:
`CREATE TRIGGER after_insert_user`
`AFTER INSERT ON users`
`FOR EACH ROW`
`BEGIN`
`    INSERT INTO logs (message) VALUES ('New user added');`
`END;`
`
`
### 

### Как реализовать агрегатные функции в SQL?
Используются для вычисления значений из нескольких строк. 
Пример: 
`SELECT COUNT(*) FROM users;`
### 

### Что такое хранимые процедуры и когда их использовать?
Это набор SQL-запросов, хранящихся в базе данных. Используются для выполнения повторяющихся задач. 
Пример:
`CREATE PROCEDURE GetUserCount AS`
`BEGIN`
`    SELECT COUNT(*) FROM users;`
`END;`
`
`
### 

### Как использовать индексы для оптимизации запросов?
Индексы помогают ускорить выполнение запросов, особенно с условиями поиска. 
Пример: 
`SELECT * FROM users WHERE name = 'Alice'; будет быстрее с индексом на name.`
### 

### Что такое временные таблицы и как они используются?
Это таблицы, которые существуют только во время сессии. Используются для хранения промежуточных данных. Пример: 
`CREATE TEMPORARY TABLE temp_users AS SELECT * FROM users;`
### 

### Как реализовать полнотекстовый поиск в SQL?
Позволяет выполнять поиск по текстовым данным.
Пример:
`SELECT * FROM articles WHERE MATCH(title, body) AGAINST('keyword');`

### Что такое схемы в базе данных?
Это контейнеры для объектов базы данных, таких как таблицы и представления. Используются для организации и управления доступом. 
Пример: 
`CREATE SCHEMA sales;`

### Как использовать операторы CASE и COALESCE?
**CASE**: условная логика. 
Пример:
`SELECT name,`
`    CASE `
`        WHEN age < 18 THEN 'Minor'`
`        ELSE 'Adult'`
`    END AS age_group`
`FROM users;`
`
`

**COALESCE**: возвращает первое ненулевое значение. 
Пример:
`SELECT COALESCE(email, 'noemail@example.com') FROM users;`

### Что такое SQL-инъекции и как их предотвратить?
Это атаки, использующие уязвимости в SQL-запросах. Предотвращаются с помощью параметризованных запросов. Пример:
`SELECT * FROM users WHERE email =?;`

### Как реализовать транзакционный контроль в SQL?
Управляет транзакциями с помощью команд BEGIN, COMMIT, ROLLBACK. Пример:
`BEGIN;`
`INSERT INTO users (name) VALUES ('John');`
`COMMIT;`
